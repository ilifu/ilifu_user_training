<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Introduction to Slurm ‚Äî ilifu Online Training Session 1</title>
    <meta name="description"
        content="Slurm job submission tutorial for ilifu HPC cluster users. Session 1, Tutorial 2.">

    <!-- Reveal.js -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.1.0/reveal.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.1.0/theme/white.min.css" id="theme">

    <!-- Highlight.js for code -->
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.1.0/plugin/highlight/monokai.min.css">

    <!-- Asciinema Player -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/asciinema-player@3.8.0/dist/bundle/asciinema-player.css">

    <!-- Google Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Fira+Code:wght@400;500&display=swap"
        rel="stylesheet">

    <style>
        :root {
            --brand-blue: #2b579a;
            --brand-blue-light: #3a7bd5;
            --brand-blue-dark: #1e3a6e;
            --brand-text: #2d3748;
            --brand-subtle: #718096;
            --brand-light: #f7fafc;
            --brand-border: #e2e8f0;
            --brand-link: #3a7bd5;
            --brand-rule: #2b579a;
        }

        .reveal {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            color: var(--brand-text);
        }

        .reveal h1,
        .reveal h2,
        .reveal h3,
        .reveal h4 {
            font-family: 'Inter', sans-serif;
            font-weight: 700;
            color: var(--brand-blue);
            text-transform: none;
            letter-spacing: -0.02em;
        }

        .reveal h1 {
            font-size: 2em;
        }

        .reveal h2 {
            font-size: 1.35em;
            margin-bottom: 0.3em;
        }

        .reveal h3 {
            font-size: 1em;
            margin-bottom: 0.2em;
        }

        .reveal p,
        .reveal li {
            font-size: 0.65em;
            line-height: 1.45;
            color: var(--brand-text);
        }

        .reveal p {
            margin-top: 0.2em;
            margin-bottom: 0.2em;
        }

        .reveal a {
            color: var(--brand-link);
        }

        .reveal ul {
            list-style: disc;
            padding-left: 1.4em;
        }

        .reveal ul li {
            margin-bottom: 0.2em;
        }

        .reveal ul ul {
            margin-top: 0.3em;
            list-style: circle;
        }

        .reveal ul ul li {
            font-size: 0.92em;
        }

        /* ========================================
           SLIDE LAYOUT: header bar + right logos
           ======================================== */

        /* Wrapper for each slide's content (sits inside <section>) */
        .slide-content {
            width: 100%;
            height: 100%;
            position: relative;
        }

        /* Top header with Slurm + ilifu logos + blue rule */
        .slide-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 0 0.3em 0;
            border-bottom: 3px solid var(--brand-rule);
            margin-bottom: 0.4em;
        }

        .slide-header img {
            height: 36px;
            object-fit: contain;
        }

        /* Right-side logo column ‚Äî fixed position */
        .logo-sidebar {
            position: fixed;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
            z-index: 100;
            padding: 8px 6px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 8px;
        }

        .logo-sidebar img {
            width: 50px;
            height: auto;
            object-fit: contain;
            opacity: 0.85;
            transition: opacity 0.3s;
        }

        .logo-sidebar img:hover {
            opacity: 1;
        }

        /* Title slide ‚Äî special layout, no header */
        .title-slide h1 {
            font-size: 2.4em;
            margin-bottom: 0.1em;
            color: var(--brand-blue);
        }

        .title-slide .subtitle {
            font-size: 1.1em;
            color: var(--brand-subtle);
            font-weight: 400;
            margin-bottom: 1.5em;
        }

        .title-slide .meta {
            font-size: 0.65em;
            color: var(--brand-subtle);
            border-top: 3px solid var(--brand-blue);
            padding-top: 1em;
            display: inline-block;
        }

        .title-slide .meta strong {
            color: var(--brand-blue-dark);
        }

        /* Section title accent */
        .section-title h2 {
            border-left: 5px solid var(--brand-blue);
            padding-left: 0.6em;
        }

        /* Code blocks */
        .reveal pre {
            width: 100%;
            margin: 0.3em 0;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);
            border-radius: 6px;
            border: 1px solid rgba(0, 0, 0, 0.08);
        }

        .reveal pre code {
            font-family: 'Fira Code', monospace;
            font-size: 0.5em;
            line-height: 1.4;
            padding: 0.6em 0.8em;
            border-radius: 6px;
            max-height: 400px;
        }

        .reveal code:not(pre code) {
            font-family: 'Fira Code', monospace;
            background: #eef2f7;
            padding: 0.12em 0.35em;
            border-radius: 3px;
            font-size: 0.85em;
            color: var(--brand-blue-dark);
            border: 1px solid var(--brand-border);
        }

        /* Tables */
        .reveal table {
            font-size: 0.52em;
            border-collapse: collapse;
            margin: 0.3em auto;
            width: 95%;
        }

        .reveal table th {
            background: var(--brand-blue);
            color: white;
            font-weight: 600;
            padding: 0.35em 0.6em;
        }

        .reveal table td {
            padding: 0.3em 0.6em;
            border-bottom: 1px solid var(--brand-border);
        }

        .reveal table tr:nth-child(even) td {
            background: var(--brand-light);
        }

        /* Info boxes */
        .info-box {
            background: #eef2f7;
            border-left: 4px solid var(--brand-blue);
            padding: 0.35em 0.8em;
            border-radius: 0 5px 5px 0;
            margin: 0.3em 0;
            text-align: left;
            font-size: 0.62em;
        }

        .info-box.tip {
            border-left-color: #38a169;
            background: #f0fff4;
        }

        /* Two-column layout */
        .columns {
            display: flex;
            gap: 1.2em;
            align-items: flex-start;
        }

        .columns .col {
            flex: 1;
            text-align: left;
        }

        /* Architecture diagram */
        .arch-diagram {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.8em;
            margin: 0.8em 0;
        }

        .arch-box {
            background: var(--brand-light);
            border: 2px solid var(--brand-border);
            border-radius: 8px;
            padding: 0.6em 1em;
            font-size: 0.62em;
            text-align: center;
            min-width: 130px;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .arch-box:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 14px rgba(0, 0, 0, 0.08);
        }

        .arch-box.login {
            border-color: var(--brand-blue);
        }

        .arch-box.compute {
            border-color: #3182ce;
        }

        .arch-box.scheduler {
            border-color: #38a169;
        }

        .arch-box .box-title {
            font-weight: 700;
            margin-bottom: 0.2em;
            font-size: 1.05em;
        }

        .arch-arrow {
            font-size: 1.6em;
            color: var(--brand-subtle);
        }

        /* Badge */
        .badge {
            display: inline-block;
            padding: 0.12em 0.45em;
            border-radius: 20px;
            font-size: 0.7em;
            font-weight: 600;
        }

        .badge-red {
            background: #fed7d7;
            color: #c53030;
        }

        .badge-green {
            background: #c6f6d5;
            color: #276749;
        }

        .badge-blue {
            background: #bee3f8;
            color: #2a4365;
        }

        .badge-gray {
            background: #e2e8f0;
            color: #4a5568;
        }

        /* Slide number */
        .reveal .slide-number {
            font-family: 'Inter', sans-serif;
            font-size: 0.6em;
            color: var(--brand-subtle);
        }

        /* Progress bar */
        .reveal .progress {
            height: 3px;
        }

        .reveal .progress span {
            background: var(--brand-blue);
        }

        /* Controls */
        .reveal .controls-arrow {
            color: var(--brand-blue) !important;
        }

        /* Asciinema container */
        .asciinema-container {
            margin: 0.6em auto;
            max-width: 780px;
            border-radius: 6px;
            overflow: hidden;
            box-shadow: 0 3px 16px rgba(0, 0, 0, 0.15);
        }

        /* Demo slide */
        .demo-title {
            font-size: 2.8em !important;
            color: var(--brand-blue) !important;
        }

        /* Best practices columns */
        .do-dont {
            display: flex;
            gap: 0.8em;
            margin-top: 0.2em;
        }

        .do-col,
        .dont-col {
            flex: 1;
            padding: 0.35em 0.5em;
            border-radius: 6px;
            text-align: left;
        }

        .do-col li,
        .dont-col li {
            font-size: 0.6em;
            margin-bottom: 0.1em;
        }

        .do-col {
            background: #f0fff4;
            border: 2px solid #38a169;
        }

        .dont-col {
            background: #fff5f5;
            border: 2px solid #e53e3e;
        }

        .do-col h3 {
            color: #38a169 !important;
        }

        .dont-col h3 {
            color: #e53e3e !important;
        }

        /* Adjust slide content to leave room for right sidebar */
        .reveal .slides section {
            padding-right: 90px;
        }
    </style>
</head>

<body>

    <!-- Right-side sponsor/funder logos (persistent across all slides) -->
    <div class="logo-sidebar">
        <img src="assets/cbio_logo.png" alt="CBIO" title="CBIO ‚Äî Computational Biology, UCT"
            onerror="this.outerHTML='<div style=&quot;width:60px;height:40px;background:#eef2f7;border:1px solid #ccc;border-radius:4px;display:flex;align-items:center;justify-content:center;font-size:10px;font-weight:600;color:#2b579a&quot;>CBIO</div>'">
        <img src="assets/idia_logo.png" alt="IDIA" title="IDIA ‚Äî Institute for Data Intensive Astronomy"
            onerror="this.outerHTML='<div style=&quot;width:60px;height:40px;background:#eef2f7;border:1px solid #ccc;border-radius:4px;display:flex;align-items:center;justify-content:center;font-size:10px;font-weight:600;color:#2b579a&quot;>IDIA</div>'">
        <img src="https://upload.wikimedia.org/wikipedia/en/thumb/7/7c/University_of_Cape_Town_logo.svg/200px-University_of_Cape_Town_logo.svg.png"
            alt="UCT" title="University of Cape Town"
            onerror="this.outerHTML='<div style=&quot;width:60px;height:40px;background:#eef2f7;border:1px solid #ccc;border-radius:4px;display:flex;align-items:center;justify-content:center;font-size:10px;font-weight:600;color:#2b579a&quot;>UCT</div>'">
    </div>

    <div class="reveal">
        <div class="slides">

            <!-- =============================== -->
            <!-- SLIDE 1: Title                   -->
            <!-- =============================== -->
            <section class="title-slide">
                <h1>Introduction to Slurm</h1>
                <p class="subtitle">Job Scheduling on ilifu HPC</p>
                <p class="meta">
                    <strong>ilifu Online Training</strong> ‚Äî Session 1, Tutorial 2<br>
                    Dane Kennedy ¬∑ ilifu Bioinformatics Support<br>
                    University of Cape Town ¬∑ February 2026
                </p>
                <aside class="notes">
                    Welcome to Session 1 of ilifu online training. Today we'll cover Slurm job submission ‚Äî
                    from your first "Hello World" to advanced batch scripts with containers.
                </aside>
            </section>

            <!-- =============================== -->
            <!-- SLIDE 2: What is Slurm?          -->
            <!-- =============================== -->
            <section>
                <div class="slide-header">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/3a/Slurm_logo.svg/200px-Slurm_logo.svg.png"
                        alt="Slurm"
                        onerror="this.outerHTML='<span style=&quot;font-weight:700;color:#2b579a;font-size:0.9em&quot;>Slurm Workload Manager</span>'">
                    <img src="https://www.ilifu.ac.za/wp-content/uploads/2023/03/ILIFU-LOGO-RGB-Landscape-1-768x327.png"
                        alt="ilifu"
                        onerror="this.outerHTML='<span style=&quot;font-weight:700;color:#2b579a;font-size:0.9em&quot;>ilifu</span>'">
                </div>
                <h2>What is Slurm?</h2>
                <div class="arch-diagram">
                    <div class="arch-box login">
                        <div class="box-title">üñ•Ô∏è Login Node</div>
                        <div>SSH access<br><code>slurm.ilifu.ac.za</code><br>Submit jobs &amp; manage files</div>
                    </div>
                    <div class="arch-arrow">‚Üí</div>
                    <div class="arch-box scheduler">
                        <div class="box-title">‚öôÔ∏è Scheduler</div>
                        <div>Queue management<br>Resource allocation<br>Accounting</div>
                    </div>
                    <div class="arch-arrow">‚Üí</div>
                    <div class="arch-box compute">
                        <div class="box-title">üîß Compute Nodes</div>
                        <div>Run analysis/simulation<br>Containers &amp; modules<br>Where your jobs execute</div>
                    </div>
                </div>
                <div class="info-box">
                    A <strong>job scheduling &amp; cluster management tool</strong>. You submit work from the login
                    node;
                    Slurm allocates compute resources and runs your jobs when they're available.
                </div>
                <p style="font-size:0.5em; color: var(--brand-subtle);">
                    üìñ <a href="https://docs.ilifu.ac.za/#/getting_started/submit_job_slurm"
                        target="_blank">docs.ilifu.ac.za ‚Äî Getting Started</a>
                </p>
                <aside class="notes">
                    Slurm consists of a login node (where users interact) and many compute nodes (where jobs run).
                    The scheduler sits in between, managing queues, partitions, and accounting.
                </aside>
            </section>

            <!-- =============================== -->
            <!-- SLIDE 3: Node/Partition Use Cases -->
            <!-- =============================== -->
            <section>
                <div class="slide-header">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/3a/Slurm_logo.svg/200px-Slurm_logo.svg.png"
                        alt="Slurm"
                        onerror="this.outerHTML='<span style=&quot;font-weight:700;color:#2b579a;font-size:0.9em&quot;>Slurm</span>'">
                    <img src="https://www.ilifu.ac.za/wp-content/uploads/2023/03/ILIFU-LOGO-RGB-Landscape-1-768x327.png"
                        alt="ilifu"
                        onerror="this.outerHTML='<span style=&quot;font-weight:700;color:#2b579a;font-size:0.9em&quot;>ilifu</span>'">
                </div>
                <h2>Nodes &amp; Partitions</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Partition</th>
                            <th>Use Case</th>
                            <th>Resources</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span class="badge badge-gray">Login</span></td>
                            <td>SLURM &amp; bash commands (<code>cd</code>, <code>mkdir</code>, <code>sbatch</code>)
                            </td>
                            <td>‚Äî</td>
                        </tr>
                        <tr>
                            <td><span class="badge badge-blue">Jupyter / Devel</span></td>
                            <td>Development, debugging, testing</td>
                            <td>32 cores, ~232 GiB, 12h max</td>
                        </tr>
                        <tr>
                            <td><span class="badge badge-green">Main</span></td>
                            <td>Stable, heavy computation</td>
                            <td>32 cores, ~232 GiB, 14d max</td>
                        </tr>
                        <tr>
                            <td><span class="badge badge-red">HighMem</span></td>
                            <td>Single high-memory or MPI jobs</td>
                            <td>Up to 96 cores, 1.5 TiB</td>
                        </tr>
                        <tr>
                            <td><span class="badge badge-red">GPU</span></td>
                            <td>GPU-accelerated workloads</td>
                            <td>32 cores, ~232 GiB + NVIDIA GPUs</td>
                        </tr>
                    </tbody>
                </table>
                <p style="font-size:0.5em; color: var(--brand-subtle);">
                    üìñ <a href="https://docs.ilifu.ac.za/#/tech_docs/running_jobs?id=available-resources"
                        target="_blank">Available Resources</a>
                </p>
                <aside class="notes">
                    Don't run heavy processes on the login node. Use Jupyter/Devel for testing,
                    Main for production workloads, and HighMem/GPU for specialized needs.
                </aside>
            </section>

            <!-- =============================== -->
            <!-- SLIDE 4: Interacting with Slurm  -->
            <!-- =============================== -->
            <section>
                <div class="slide-header">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/3a/Slurm_logo.svg/200px-Slurm_logo.svg.png"
                        alt="Slurm"
                        onerror="this.outerHTML='<span style=&quot;font-weight:700;color:#2b579a;font-size:0.9em&quot;>Slurm</span>'">
                    <img src="https://www.ilifu.ac.za/wp-content/uploads/2023/03/ILIFU-LOGO-RGB-Landscape-1-768x327.png"
                        alt="ilifu"
                        onerror="this.outerHTML='<span style=&quot;font-weight:700;color:#2b579a;font-size:0.9em&quot;>ilifu</span>'">
                </div>
                <h2>Accessing the Cluster</h2>
                <div class="columns">
                    <div class="col">
                        <h3>üåê Web Access</h3>
                        <p><a href="https://jupyter.ilifu.ac.za" target="_blank">jupyter.ilifu.ac.za</a></p>
                        <p>‚Üí JupyterHub ‚Üí Compute nodes</p>
                    </div>
                    <div class="col">
                        <h3>üíª CLI Access</h3>
                        <pre><code class="language-bash">ssh &lt;username&gt;@slurm.ilifu.ac.za</code></pre>
                        <p>‚Üí Login node ‚Üí Partitions ‚Üí Compute</p>
                    </div>
                </div>
                <div class="info-box tip" style="margin-top: 0.8em;">
                    <strong>üí° Agent forwarding:</strong> Use <code>ssh -A</code> to hop from login to compute nodes
                    without re-entering credentials (e.g., for <code>htop</code> monitoring).
                </div>
                <aside class="notes">
                    Two ways in: JupyterHub for interactive web-based work, or SSH for CLI.
                    Use -A flag for agent forwarding if you need to SSH to compute nodes directly.
                </aside>
            </section>

            <!-- =============================== -->
            <!-- SLIDE 5: CLI Commands            -->
            <!-- =============================== -->
            <section>
                <div class="slide-header">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/3a/Slurm_logo.svg/200px-Slurm_logo.svg.png"
                        alt="Slurm"
                        onerror="this.outerHTML='<span style=&quot;font-weight:700;color:#2b579a;font-size:0.9em&quot;>Slurm</span>'">
                    <img src="https://www.ilifu.ac.za/wp-content/uploads/2023/03/ILIFU-LOGO-RGB-Landscape-1-768x327.png"
                        alt="ilifu"
                        onerror="this.outerHTML='<span style=&quot;font-weight:700;color:#2b579a;font-size:0.9em&quot;>ilifu</span>'">
                </div>
                <h2>Essential CLI Commands</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Command</th>
                            <th>Purpose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>ssh &lt;un&gt;@slurm.ilifu.ac.za</code></td>
                            <td>Connect to login node</td>
                        </tr>
                        <tr>
                            <td><code>sinfo</code></td>
                            <td>Show partitions &amp; resources</td>
                        </tr>
                        <tr>
                            <td><code>squeue -u $USER</code></td>
                            <td>Show your queued/running jobs</td>
                        </tr>
                        <tr>
                            <td><code>sbatch script.sh</code></td>
                            <td>Submit a batch job</td>
                        </tr>
                        <tr>
                            <td><code>scancel &lt;jobid&gt;</code></td>
                            <td>Cancel a running/pending job</td>
                        </tr>
                        <tr>
                            <td><code>sacct</code></td>
                            <td>View past job history</td>
                        </tr>
                        <tr>
                            <td><code>sbatch --help</code></td>
                            <td>Show all submission parameters</td>
                        </tr>
                    </tbody>
                </table>
                <p style="font-size:0.5em; color: var(--brand-subtle);">
                    üìñ <a href="https://slurm.schedmd.com/quickstart.html" target="_blank">Slurm Quickstart Guide</a>
                </p>
            </section>

            <!-- =============================== -->
            <!-- SLIDE 6: First Job (minimal)     -->
            <!-- =============================== -->
            <section>
                <div class="slide-header">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/3a/Slurm_logo.svg/200px-Slurm_logo.svg.png"
                        alt="Slurm"
                        onerror="this.outerHTML='<span style=&quot;font-weight:700;color:#2b579a;font-size:0.9em&quot;>Slurm</span>'">
                    <img src="https://www.ilifu.ac.za/wp-content/uploads/2023/03/ILIFU-LOGO-RGB-Landscape-1-768x327.png"
                        alt="ilifu"
                        onerror="this.outerHTML='<span style=&quot;font-weight:700;color:#2b579a;font-size:0.9em&quot;>ilifu</span>'">
                </div>
                <h2>Your First Job: <code>minimal.sbatch</code></h2>
                <pre><code class="language-bash">#!/bin/bash

echo "Hello World!"</code></pre>
                <div class="columns" style="margin-top: 0.6em;">
                    <div class="col">
                        <h3>Submit it</h3>
                        <pre><code class="language-bash">$ sbatch minimal.sbatch
Submitted batch job 12345</code></pre>
                    </div>
                    <div class="col">
                        <h3>Check status</h3>
                        <pre><code class="language-bash">$ squeue -u $USER
  JOBID  PARTITION  NAME   STATE
  12345  Main       bash  RUNNING</code></pre>
                    </div>
                </div>
                <div class="info-box">
                    That's it! The simplest possible Slurm job is just a bash script.
                    Slurm queues it and runs it on a compute node when resources are available.
                </div>
                <aside class="notes">
                    This is the absolute minimum. Just a bash script with a shebang line.
                    Slurm will use all default parameters - 3 hours, 3 GiB RAM, Main partition.
                </aside>
            </section>

            <!-- =============================== -->
            <!-- SLIDE 7: Default Parameters      -->
            <!-- =============================== -->
            <section>
                <div class="slide-header">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/3a/Slurm_logo.svg/200px-Slurm_logo.svg.png"
                        alt="Slurm"
                        onerror="this.outerHTML='<span style=&quot;font-weight:700;color:#2b579a;font-size:0.9em&quot;>Slurm</span>'">
                    <img src="https://www.ilifu.ac.za/wp-content/uploads/2023/03/ILIFU-LOGO-RGB-Landscape-1-768x327.png"
                        alt="ilifu"
                        onerror="this.outerHTML='<span style=&quot;font-weight:700;color:#2b579a;font-size:0.9em&quot;>ilifu</span>'">
                </div>
                <h2>Default Job Parameters</h2>
                <p style="font-size: 0.68em;">When you don't specify options, Slurm uses these defaults:</p>
                <table>
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>Default</th>
                            <th>What it controls</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>--time</code></td>
                            <td>0-03:00:00</td>
                            <td>Wall-clock time limit (3 hours)</td>
                        </tr>
                        <tr>
                            <td><code>--mem</code></td>
                            <td>3G</td>
                            <td>Memory allocation</td>
                        </tr>
                        <tr>
                            <td><code>--ntasks</code></td>
                            <td>1</td>
                            <td>Number of tasks</td>
                        </tr>
                        <tr>
                            <td><code>--nodes</code></td>
                            <td>1</td>
                            <td>Number of nodes</td>
                        </tr>
                        <tr>
                            <td><code>--partition</code></td>
                            <td>Main</td>
                            <td>Which partition to use</td>
                        </tr>
                        <tr>
                            <td><code>--account</code></td>
                            <td><em>your default</em></td>
                            <td>Billing account</td>
                        </tr>
                    </tbody>
                </table>
                <div class="info-box tip">
                    <strong>üí° Tip:</strong> Set limits slightly above your expected needs.
                    Too little ‚Üí job killed. Too much ‚Üí wasted resources &amp; slower scheduling.
                </div>
                <p style="font-size:0.5em; color: var(--brand-subtle);">
                    üìñ <a
                        href="https://docs.ilifu.ac.za/#/tech_docs/running_jobs?id=customising-your-job-using-sbatchrun-parameters"
                        target="_blank">Customising Your Job</a>
                </p>
            </section>

            <!-- =============================== -->
            <!-- SLIDE 8: Output Capture          -->
            <!-- =============================== -->
            <section>
                <div class="slide-header">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/3a/Slurm_logo.svg/200px-Slurm_logo.svg.png"
                        alt="Slurm"
                        onerror="this.outerHTML='<span style=&quot;font-weight:700;color:#2b579a;font-size:0.9em&quot;>Slurm</span>'">
                    <img src="https://www.ilifu.ac.za/wp-content/uploads/2023/03/ILIFU-LOGO-RGB-Landscape-1-768x327.png"
                        alt="ilifu"
                        onerror="this.outerHTML='<span style=&quot;font-weight:700;color:#2b579a;font-size:0.9em&quot;>ilifu</span>'">
                </div>
                <h2>Capturing Output</h2>
                <p style="font-size: 0.68em;">By default, job output goes nowhere. Capture it with directives:</p>
                <pre><code class="language-bash">#SBATCH --output=logs/demo-job-%j.out
#SBATCH --error=logs/demo-job-%j.err</code></pre>
                <div class="columns" style="margin-top: 0.5em;">
                    <div class="col">
                        <h3>What <code>%j</code> does</h3>
                        <ul>
                            <li>Replaced with the <strong>Job ID</strong></li>
                            <li>Each run gets unique log files</li>
                            <li>No accidental overwrites</li>
                        </ul>
                    </div>
                    <div class="col">
                        <h3>Don't forget!</h3>
                        <pre><code class="language-bash"># Create the logs directory first
mkdir -p logs</code></pre>
                        <p style="font-size:0.82em;">Slurm won't create directories for you ‚Äî the job will fail
                            silently.</p>
                    </div>
                </div>
            </section>

            <!-- =============================== -->
            <!-- SLIDE 9: Building Features       -->
            <!-- (Vertical slide stack)           -->
            <!-- =============================== -->
            <section>
                <!-- 9a: Intro -->
                <section class="section-title">
                    <div class="slide-header">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/3a/Slurm_logo.svg/200px-Slurm_logo.svg.png"
                            alt="Slurm"
                            onerror="this.outerHTML='<span style=&quot;font-weight:700;color:#2b579a;font-size:0.9em&quot;>Slurm</span>'">
                        <img src="https://www.ilifu.ac.za/wp-content/uploads/2023/03/ILIFU-LOGO-RGB-Landscape-1-768x327.png"
                            alt="ilifu"
                            onerror="this.outerHTML='<span style=&quot;font-weight:700;color:#2b579a;font-size:0.9em&quot;>ilifu</span>'">
                    </div>
                    <h2>Building a Job Script</h2>
                    <p style="font-size: 0.8em;">Step by step, from minimal to full-featured</p>
                    <p style="font-size: 0.6em; color: var(--brand-subtle);">‚Üì Navigate down through each step</p>
                </section>

                <!-- 9b: Job Naming -->
                <section>
                    <h3>Step 1: Job Naming</h3>
                    <pre><code class="language-bash">#SBATCH --job-name=tutorial2_R_container</code></pre>
                    <ul>
                        <li>Makes jobs easier to identify in <code>squeue</code> output</li>
                        <li>Also visible in <code>sacct</code> for reviewing past jobs</li>
                        <li>Without this, you'll see generic names or numbers</li>
                    </ul>
                </section>

                <!-- 9c: Time & Memory -->
                <section>
                    <h3>Step 2: Time &amp; Memory Limits</h3>
                    <pre><code class="language-bash">#SBATCH --time=00-00:01:00
#SBATCH --mem=4G</code></pre>
                    <div class="columns">
                        <div class="col">
                            <p><strong>Time format:</strong> <code>DD-HH:MM:SS</code></p>
                            <ul>
                                <li>Here: 0 days, 0 hours, 1 minute</li>
                                <li>Jobs exceeding this are <strong>killed</strong></li>
                                <li>Set slightly higher than expected</li>
                            </ul>
                        </div>
                        <div class="col">
                            <p><strong>Memory:</strong></p>
                            <ul>
                                <li>Too little ‚Üí out-of-memory errors</li>
                                <li>Too much ‚Üí slower scheduling</li>
                                <li>Match to your application's needs</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- 9d: Output Files -->
                <section>
                    <h3>Step 3: Output Files</h3>
                    <pre><code class="language-bash">#SBATCH --output=R_container-%j.stdout
#SBATCH --error=R_container-%j.stderr</code></pre>
                    <ul>
                        <li>Separate files for <strong>stdout</strong> and <strong>stderr</strong></li>
                        <li><code>%j</code> is replaced with your unique Job ID</li>
                        <li>Makes debugging much easier</li>
                    </ul>
                </section>

                <!-- 9e: Email -->
                <section>
                    <h3>Step 4: Email Notifications</h3>
                    <pre><code class="language-bash">#SBATCH --mail-user=your@email_address
#SBATCH --mail-type=BEGIN,END,FAIL,TIME_LIMIT_80</code></pre>
                    <table>
                        <thead>
                            <tr>
                                <th>Event</th>
                                <th>When</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>BEGIN</code></td>
                                <td>Job starts running</td>
                            </tr>
                            <tr>
                                <td><code>END</code></td>
                                <td>Job completes successfully</td>
                            </tr>
                            <tr>
                                <td><code>FAIL</code></td>
                                <td>Job fails</td>
                            </tr>
                            <tr>
                                <td><code>TIME_LIMIT_80</code></td>
                                <td>80% of time used (‚ö†Ô∏è warning)</td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="info-box tip">
                        <strong>üí° Great for long jobs</strong> ‚Äî no need to keep checking <code>squeue</code>
                        repeatedly.
                    </div>
                </section>

                <!-- 9f: Account -->
                <section>
                    <h3>Step 5: Billing Account</h3>
                    <pre><code class="language-bash">#SBATCH --account=&lt;YOUR_ACCOUNT_NAME&gt;</code></pre>
                    <ul>
                        <li>Many clusters require jobs to be billed to a specific project</li>
                        <li>Check with your cluster administrator for the correct name</li>
                        <li>Example: <code>--account=b34-admins-ag</code></li>
                    </ul>
                </section>

                <!-- 9g: Containers -->
                <section>
                    <h3>Step 6: Running Software</h3>
                    <div class="columns">
                        <div class="col">
                            <h3 style="color: #38a169 !important;">Singularity Container</h3>
                            <pre><code class="language-bash">singularity exec \
  /software/common/containers/\
  RStudio2023.06.1-524-R4.3.1.sif \
  Rscript hello_world.R</code></pre>
                            <p style="font-size:0.82em;">Bundled, reproducible environment</p>
                        </div>
                        <div class="col">
                            <h3 style="color: #3182ce !important;">Environment Modules</h3>
                            <pre><code class="language-bash">module add python/3.11.2
python hello_world.py</code></pre>
                            <p style="font-size:0.82em;">Pre-installed system software</p>
                        </div>
                    </div>
                    <div class="info-box">
                        <strong>Containers</strong> bundle everything for consistency across environments.
                        <strong>Modules</strong> load pre-installed software. Choose based on availability and needs.
                    </div>
                </section>
            </section>

            <!-- =============================== -->
            <!-- SLIDE 10: Complete Example       -->
            <!-- =============================== -->
            <section>
                <div class="slide-header">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/3a/Slurm_logo.svg/200px-Slurm_logo.svg.png"
                        alt="Slurm"
                        onerror="this.outerHTML='<span style=&quot;font-weight:700;color:#2b579a;font-size:0.9em&quot;>Slurm</span>'">
                    <img src="https://www.ilifu.ac.za/wp-content/uploads/2023/03/ILIFU-LOGO-RGB-Landscape-1-768x327.png"
                        alt="ilifu"
                        onerror="this.outerHTML='<span style=&quot;font-weight:700;color:#2b579a;font-size:0.9em&quot;>ilifu</span>'">
                </div>
                <h2>Complete Example: <code>maximal.sbatch</code></h2>
                <pre><code class="language-bash">#!/bin/bash
#SBATCH --job-name=tutorial2_R_container
#SBATCH --time=00-00:01:00
#SBATCH --mem=4G
#SBATCH --partition=Main
#SBATCH --output=R_container-%j.stdout
#SBATCH --error=R_container-%j.stderr
#SBATCH --mail-user=your@email_address
#SBATCH --mail-type=BEGIN,END,FAIL,TIME_LIMIT_80
#SBATCH --account=b34-admins-ag

singularity exec /software/common/containers/RStudio2023.06.1-524-R4.3.1.sif Rscript hello_world.R</code></pre>
                <div class="info-box">
                    All the pieces together: naming, limits, output capture, notifications, billing, and a containerised
                    command.
                </div>
            </section>

            <!-- =============================== -->
            <!-- SLIDE 11: Resource Limits        -->
            <!-- =============================== -->
            <section>
                <div class="slide-header">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/3a/Slurm_logo.svg/200px-Slurm_logo.svg.png"
                        alt="Slurm"
                        onerror="this.outerHTML='<span style=&quot;font-weight:700;color:#2b579a;font-size:0.9em&quot;>Slurm</span>'">
                    <img src="https://www.ilifu.ac.za/wp-content/uploads/2023/03/ILIFU-LOGO-RGB-Landscape-1-768x327.png"
                        alt="ilifu"
                        onerror="this.outerHTML='<span style=&quot;font-weight:700;color:#2b579a;font-size:0.9em&quot;>ilifu</span>'">
                </div>
                <h2>Resource Limits per Partition</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Partition</th>
                            <th>CPUs</th>
                            <th>RAM</th>
                            <th>Max Wall-time</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span class="badge badge-green">Main</span></td>
                            <td>1 ‚Äì 48</td>
                            <td>3 ‚Äì 232 GiB</td>
                            <td>14 days</td>
                        </tr>
                        <tr>
                            <td><span class="badge badge-red">HighMem</span></td>
                            <td>1 ‚Äì 96</td>
                            <td>15 ‚Äì 1508 GiB</td>
                            <td>14 days</td>
                        </tr>
                        <tr>
                            <td><span class="badge badge-red">GPU</span></td>
                            <td>1 ‚Äì 48</td>
                            <td>7 ‚Äì 354 GiB</td>
                            <td>14 days</td>
                        </tr>
                        <tr>
                            <td><span class="badge badge-blue">Devel</span></td>
                            <td>1 ‚Äì 32</td>
                            <td>‚Äî</td>
                            <td>12 hours</td>
                        </tr>
                    </tbody>
                </table>
                <div class="info-box">
                    Request only what you need. Over-requesting delays scheduling and wastes shared resources.
                </div>
                <p style="font-size:0.5em; color: var(--brand-subtle);">
                    üìñ <a href="https://docs.ilifu.ac.za/#/tech_docs/resource_allocation?id=maximum-allocation"
                        target="_blank">Resource Allocation</a>
                </p>
            </section>

            <!-- =============================== -->
            <!-- SLIDE 12: Demo Time              -->
            <!-- =============================== -->
            <section>
                <h2 class="demo-title">üé¨ Demo Time!</h2>

                <div class="asciinema-container" id="demo-basic"></div>

                <p style="font-size: 0.6em; color: var(--brand-subtle); margin-top: 0.5em;">
                    Submitting and monitoring a basic Slurm job on ilifu
                </p>
                <p style="font-size:0.5em;">
                    üìñ <a href="https://github.com/ilifu/ilifu_user_training/tree/main/session1/tutorial2"
                        target="_blank">Tutorial repository on GitHub</a>
                </p>
                <aside class="notes">
                    Live demo: SSH in, view our batch scripts, submit a job, check squeue, view output.
                </aside>
            </section>

            <!-- =============================== -->
            <!-- SLIDE 13: Best Practices         -->
            <!-- =============================== -->
            <section>
                <div class="slide-header">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/3a/Slurm_logo.svg/200px-Slurm_logo.svg.png"
                        alt="Slurm"
                        onerror="this.outerHTML='<span style=&quot;font-weight:700;color:#2b579a;font-size:0.9em&quot;>Slurm</span>'">
                    <img src="https://www.ilifu.ac.za/wp-content/uploads/2023/03/ILIFU-LOGO-RGB-Landscape-1-768x327.png"
                        alt="ilifu"
                        onerror="this.outerHTML='<span style=&quot;font-weight:700;color:#2b579a;font-size:0.9em&quot;>ilifu</span>'">
                </div>
                <h2>Best Practices</h2>
                <div class="do-dont">
                    <div class="do-col">
                        <h3>‚úÖ Do</h3>
                        <ul>
                            <li>Use <code>sbatch</code> for production work</li>
                            <li>Identify resource requirements first</li>
                            <li>Clean up temp files (e.g., <code>/scratch3</code>)</li>
                            <li>Use Singularity containers for software</li>
                            <li>Use <code>transfer.ilifu.ac.za</code> for data transfers</li>
                        </ul>
                    </div>
                    <div class="dont-col">
                        <h3>‚ùå Don't</h3>
                        <ul>
                            <li>Run heavy processes on the login node</li>
                            <li>Place large files in <code>/users</code> (home dir)</li>
                            <li>Use <code>scp</code>/<code>rsync</code> on login node</li>
                            <li>Request way more resources than needed</li>
                        </ul>
                    </div>
                </div>
                <p style="font-size:0.5em; color: var(--brand-subtle); margin-top: 0.6em;">
                    üìñ <a href="https://docs.ilifu.ac.za/#/getting_started/best_practices" target="_blank">Best
                        Practices Guide</a>
                </p>
            </section>

            <!-- =============================== -->
            <!-- SLIDE 14: Summary                -->
            <!-- =============================== -->
            <section class="title-slide">
                <h1>Start Simple, Build Up</h1>
                <ol style="font-size: 0.68em; text-align: left; display: inline-block;">
                    <li>Basic job ‚Üí add output capture</li>
                    <li>Add time/memory limits to prevent runaway jobs</li>
                    <li>Add email notifications for long jobs</li>
                    <li>Use containers for reproducible environments</li>
                    <li>Specify billing accounts as required</li>
                </ol>
                <div class="info-box" style="margin-top: 0.8em;">
                    <strong>Next steps:</strong> Explore <code>man sbatch</code>, job arrays, dependencies, and
                    multi-node MPI jobs.
                </div>
                <p class="meta" style="margin-top: 0.8em;">
                    <strong>Questions?</strong><br>
                    üìß support@ilifu.ac.za ¬∑ üìñ docs.ilifu.ac.za
                </p>
            </section>

        </div><!-- /.slides -->
    </div><!-- /.reveal -->

    <!-- Reveal.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.1.0/reveal.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.1.0/plugin/highlight/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.1.0/plugin/notes/notes.min.js"></script>

    <!-- Asciinema Player -->
    <script src="https://cdn.jsdelivr.net/npm/asciinema-player@3.8.0/dist/bundle/asciinema-player.min.js"></script>

    <script>
        // Initialize Reveal.js
        Reveal.initialize({
            hash: true,
            slideNumber: 'c/t',
            transition: 'slide',
            transitionSpeed: 'default',
            controlsTutorial: true,
            progress: true,
            center: true,
            width: 1080,
            height: 700,
            margin: 0.06,
            plugins: [RevealHighlight, RevealNotes]
        });

        // Initialize Asciinema player on Demo slide
        Reveal.on('slidechanged', function (event) {
            const demoContainer = event.currentSlide.querySelector('#demo-basic');
            if (demoContainer && !demoContainer.hasChildNodes()) {
                try {
                    AsciinemaPlayer.create(
                        'demos/demo_basic.cast',
                        demoContainer,
                        {
                            theme: 'monokai',
                            cols: 100,
                            rows: 24,
                            autoPlay: true,
                            loop: true,
                            speed: 1.5,
                            fit: 'width',
                            terminalFontFamily: "'Fira Code', monospace"
                        }
                    );
                } catch (e) {
                    demoContainer.innerHTML = '<p style="color: var(--brand-subtle); font-size: 0.7em;">‚ö†Ô∏è Demo recording not found. See <code>demos/</code> directory for recording instructions.</p>';
                }
            }
        });
    </script>

</body>

</html>